<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f6f8fa;
      padding: 20px;
    }

    h2 {
      text-align: center;
      color: #21295c;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: 600;
      color: #21295c;
    }

    input, select, textarea {
      width: 100%;
      margin-top: 6px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #21295c;
      font-size: 15px;
      box-sizing: border-box;
    }

    button {
      margin-top: 20px;
      background: #c6c7ff;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 12px 16px;
      width: 100%;
      font-size: 16px;
      cursor: pointer;
    }

    .hidden { display: none; }

    /* ‚úÖ –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */
    #toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: #c6c7ff;
      color: white;
      padding: 12px 20px;
      border-radius: 10px;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      display: none;
      animation: fadein 0.3s, fadeout 0.3s 1.2s;
    }

    @keyframes fadein {
      from { opacity: 0; transform: translate(-50%, 20px); }
      to { opacity: 1; transform: translate(-50%, 0); }
    }

    @keyframes fadeout {
      from { opacity: 1; }
      to { opacity: 0; }
    }
  </style>
</head>
<body>
  <h2>–§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏</h2>

  <label>–ò–º—è:</label>
  <input id="name" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" />

  <label>–ù–∏–∫ Telegram:</label>
  <input id="nickname" type="text" placeholder="@username" value="@" />

  <label>–ö–ª–∞—Å—Å:</label>
  <select id="class">
    <option value="" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ...</option>
    <option>1‚Äì4 –∫–ª–∞—Å—Å</option>
    <option>5‚Äì8 –∫–ª–∞—Å—Å</option>
    <option>9‚Äì11 –∫–ª–∞—Å—Å</option>
    <option>–î—Ä—É–≥–æ–µ</option>
  </select>
  <input id="class-other" class="hidden" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç" />

  <label>–¶–µ–ª—å –∑–∞–Ω—è—Ç–∏–π:</label>
  <select id="goal">
    <option value="" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ...</option>
    <option>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –û–ì–≠</option>
    <option>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ï–ì–≠</option>
    <option>–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Python</option>
    <option>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ú–¶–ö–û/–í–ü–†</option>
    <option>–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å</option>
    <option>–ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏</option>
    <option>–î—Ä—É–≥–æ–µ</option>
  </select>
  <input id="goal-other" class="hidden" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç" />

  <button id="send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>

  <!-- üîî –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
  <div id="toast">‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const classSelect = document.getElementById("class");
    const classOther = document.getElementById("class-other");
    const goalSelect = document.getElementById("goal");
    const goalOther = document.getElementById("goal-other");
    const toast = document.getElementById("toast");

    function showToast() {
      toast.style.display = "block";
      setTimeout(() => { toast.style.display = "none"; }, 1500);
    }

    classSelect.addEventListener("change", () => {
      classOther.classList.toggle("hidden", classSelect.value !== "–î—Ä—É–≥–æ–µ");
      if (classSelect.value !== "–î—Ä—É–≥–æ–µ") classOther.value = "";
    });

    goalSelect.addEventListener("change", () => {
      goalOther.classList.toggle("hidden", goalSelect.value !== "–î—Ä—É–≥–æ–µ");
      if (goalSelect.value !== "–î—Ä—É–≥–æ–µ") goalOther.value = "";
    });

    document.getElementById("send").addEventListener("click", () => {
      const name = document.getElementById("name").value.trim();
      const nickname = document.getElementById("nickname").value.trim();
      const classValue = classSelect.value === "–î—Ä—É–≥–æ–µ" ? classOther.value.trim() : classSelect.value;
      const goalValue = goalSelect.value === "–î—Ä—É–≥–æ–µ" ? goalOther.value.trim() : goalSelect.value;

      if (!name || !nickname) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ –Ω–∏–∫ Telegram.");
        return;
      }

      const data = { name, nickname, class: classValue, goal: goalValue };

      tg.sendData(JSON.stringify(data));

      showToast();

      setTimeout(() => {
        tg.close();
      }, 1500);
    });
  </script>
</body>
</html>
